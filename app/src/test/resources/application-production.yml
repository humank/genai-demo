# Production profile configuration for testing
# This configuration simulates production settings in a test environment using H2

spring:
  # Use H2 database with PostgreSQL compatibility mode for testing
  datasource:
    url: jdbc:h2:mem:testdb-production;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH
    driver-class-name: org.h2.Driver
    username: sa
    password: 
  
  # JPA configuration - use create-drop for testing to avoid Flyway migration issues
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: false
  
  # Flyway configuration - use H2 locations for testing
  flyway:
    enabled: false
    locations: classpath:db/migration/h2
  
  # H2 console disabled for production simulation
  h2:
    console:
      enabled: false
  
  # Kafka configuration for testing
  kafka:
    bootstrap-servers: localhost:9092
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
    consumer:
      group-id: genai-demo-test
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer

# Simulate environment variables for production
DB_HOST: localhost
DB_NAME: testdb
DB_USERNAME: sa

# Profile configuration
genai-demo:
  profile:
    name: production
    description: Production environment configuration for testing
    features:
      h2-console: false
      debug-logging: false
      in-memory-events: false
      kafka-events: true

# Logging configuration
logging:
  level:
    solid.humank.genaidemo: INFO
    org.springframework: WARN
    org.hibernate: WARN