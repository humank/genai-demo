<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="952px" preserveAspectRatio="none" style="width:470px;height:952px;background:#FFFFFF;" version="1.1" viewBox="0 0 470 952" width="470px" zoomAndPan="magnify"><defs/><g><ellipse cx="229.0391" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="140" x="159.0391" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="169.0391" y="71.6016">&#19994;&#21153;&#25805;&#20316;&#35302;&#21457;&#39046;&#22495;&#20107;&#20214;</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="316.625" x="70.7266" y="104.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="296.625" x="80.7266" y="125.7344">&#32858;&#21512;&#26681;&#36890;&#36807;AggregateLifecycleAware.apply()&#21457;&#24067;&#20107;&#20214;</text><polygon fill="#E6F2FF" points="165.3916,158.2656,292.6865,158.2656,304.6865,170.2656,292.6865,182.2656,165.3916,182.2656,153.3916,170.2656,165.3916,158.2656" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127.2949" x="165.3916" y="174.4229">AggregateLifecycle&#21487;&#29992;?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17.4829" x="135.9087" y="167.9453">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.5835" x="304.6865" y="167.9453">no</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="201.8047" x="11" y="192.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181.8047" x="21" y="213.8672">&#36890;&#36807;AggregateLifecycle&#21457;&#24067;&#20107;&#20214;</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="226.7422" x="232.8047" y="192.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="206.7422" x="242.8047" y="213.8672">&#38477;&#32423;&#21040;DomainEventPublisherService</text><polygon fill="#E6F2FF" points="229.0391,232.3984,241.0391,244.3984,229.0391,256.3984,217.0391,244.3984,229.0391,232.3984" style="stroke:#3C7FC0;stroke-width:0.5;"/><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="164.9082" x="146.585" y="276.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144.9082" x="156.585" y="298">DomainEventBus&#25509;&#25910;&#20107;&#20214;</text><rect fill="#F5F5F5" height="48.2656" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="256.2676" x="100.9053" y="330.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="236.2676" x="110.9053" y="352.1328">DomainEventPublisherAdapter&#23558;&#39046;&#22495;&#20107;&#20214;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174.3281" x="110.9053" y="366.2656">&#21253;&#35013;&#20026;Spring ApplicationEvent</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="284.0586" x="87.0098" y="398.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="264.0586" x="97.0098" y="420.3984">&#36890;&#36807;Spring ApplicationEventPublisher&#21457;&#24067;&#20107;&#20214;</text><rect fill="#F5F5F5" height="48.2656" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="218.9902" x="119.5439" y="452.9297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="198.9902" x="129.5439" y="474.5313">DomainEventSubscriptionManager</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.3281" x="129.5439" y="488.6641">&#25509;&#25910;Spring ApplicationEvent</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="144.4414" x="156.8184" y="521.1953"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124.4414" x="166.8184" y="542.7969">&#25552;&#21462;&#21407;&#22987;DomainEvent</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="140" x="159.0391" y="575.3281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="169.0391" y="596.9297">&#26597;&#25214;&#21305;&#37197;&#30340;&#20107;&#20214;&#35746;&#38405;&#32773;</text><polygon fill="#E6F2FF" points="199.2188,629.4609,258.8594,629.4609,270.8594,641.4609,258.8594,653.4609,199.2188,653.4609,187.2188,641.4609,199.2188,629.4609" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59.6406" x="199.2188" y="645.6182">&#25214;&#21040;&#35746;&#38405;&#32773;?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17.4829" x="169.7358" y="639.1406">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.5835" x="270.8594" y="639.1406">no</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="188" x="32.5391" y="663.4609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168" x="42.5391" y="685.0625">&#36890;&#36807;&#21453;&#23556;&#35843;&#29992;&#35746;&#38405;&#32773;&#30340;&#22788;&#29702;&#26041;&#27861;</text><polygon fill="#E6F2FF" points="102.2188,717.5938,150.8594,717.5938,162.8594,729.5938,150.8594,741.5938,102.2188,741.5938,90.2188,729.5938,102.2188,717.5938" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="48.6406" x="102.2188" y="733.751">&#22788;&#29702;&#25104;&#21151;?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17.4829" x="72.7358" y="727.2734">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.5835" x="162.8594" y="727.2734">no</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="92" x="15.5391" y="751.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="25.5391" y="773.1953">&#20107;&#20214;&#22788;&#29702;&#23436;&#25104;</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="92" x="145.5391" y="751.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="155.5391" y="773.1953">&#35760;&#24405;&#38169;&#35823;&#26085;&#24535;</text><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="128" x="127.5391" y="805.7266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="137.5391" y="827.3281">&#32487;&#32493;&#22788;&#29702;&#20854;&#20182;&#35746;&#38405;&#32773;</text><polygon fill="#E6F2FF" points="126.5391,845.8594,138.5391,857.8594,126.5391,869.8594,114.5391,857.8594,126.5391,845.8594" style="stroke:#3C7FC0;stroke-width:0.5;"/><rect fill="#F5F5F5" height="34.1328" rx="12.5" ry="12.5" style="stroke:#999999;stroke-width:0.5;" width="92" x="285.5391" y="663.4609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="295.5391" y="685.0625">&#20107;&#20214;&#26410;&#34987;&#22788;&#29702;</text><polygon fill="#E6F2FF" points="229.0391,875.8594,241.0391,887.8594,229.0391,899.8594,217.0391,887.8594,229.0391,875.8594" style="stroke:#3C7FC0;stroke-width:0.5;"/><ellipse cx="229.0391" cy="930.8594" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="229.0391" cy="930.8594" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="30" y2="50"/><polygon fill="#666666" points="225.0391,40,229.0391,50,233.0391,40,229.0391,44" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="84.1328" y2="104.1328"/><polygon fill="#666666" points="225.0391,94.1328,229.0391,104.1328,233.0391,94.1328,229.0391,98.1328" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="153.3916" x2="111.9023" y1="170.2656" y2="170.2656"/><line style="stroke:#666666;stroke-width:1;" x1="111.9023" x2="111.9023" y1="170.2656" y2="192.2656"/><polygon fill="#666666" points="107.9023,182.2656,111.9023,192.2656,115.9023,182.2656,111.9023,186.2656" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="304.6865" x2="346.1758" y1="170.2656" y2="170.2656"/><line style="stroke:#666666;stroke-width:1;" x1="346.1758" x2="346.1758" y1="170.2656" y2="192.2656"/><polygon fill="#666666" points="342.1758,182.2656,346.1758,192.2656,350.1758,182.2656,346.1758,186.2656" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="111.9023" x2="111.9023" y1="226.3984" y2="244.3984"/><line style="stroke:#666666;stroke-width:1;" x1="111.9023" x2="217.0391" y1="244.3984" y2="244.3984"/><polygon fill="#666666" points="207.0391,240.3984,217.0391,244.3984,207.0391,248.3984,211.0391,244.3984" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="346.1758" x2="346.1758" y1="226.3984" y2="244.3984"/><line style="stroke:#666666;stroke-width:1;" x1="346.1758" x2="241.0391" y1="244.3984" y2="244.3984"/><polygon fill="#666666" points="251.0391,240.3984,241.0391,244.3984,251.0391,248.3984,247.0391,244.3984" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="138.2656" y2="158.2656"/><polygon fill="#666666" points="225.0391,148.2656,229.0391,158.2656,233.0391,148.2656,229.0391,152.2656" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="256.3984" y2="276.3984"/><polygon fill="#666666" points="225.0391,266.3984,229.0391,276.3984,233.0391,266.3984,229.0391,270.3984" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="310.5313" y2="330.5313"/><polygon fill="#666666" points="225.0391,320.5313,229.0391,330.5313,233.0391,320.5313,229.0391,324.5313" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="378.7969" y2="398.7969"/><polygon fill="#666666" points="225.0391,388.7969,229.0391,398.7969,233.0391,388.7969,229.0391,392.7969" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="432.9297" y2="452.9297"/><polygon fill="#666666" points="225.0391,442.9297,229.0391,452.9297,233.0391,442.9297,229.0391,446.9297" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="501.1953" y2="521.1953"/><polygon fill="#666666" points="225.0391,511.1953,229.0391,521.1953,233.0391,511.1953,229.0391,515.1953" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="555.3281" y2="575.3281"/><polygon fill="#666666" points="225.0391,565.3281,229.0391,575.3281,233.0391,565.3281,229.0391,569.3281" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="191.5391" x2="191.5391" y1="785.7266" y2="805.7266"/><polygon fill="#666666" points="187.5391,795.7266,191.5391,805.7266,195.5391,795.7266,191.5391,799.7266" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="90.2188" x2="61.5391" y1="729.5938" y2="729.5938"/><line style="stroke:#666666;stroke-width:1;" x1="61.5391" x2="61.5391" y1="729.5938" y2="751.5938"/><polygon fill="#666666" points="57.5391,741.5938,61.5391,751.5938,65.5391,741.5938,61.5391,745.5938" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="162.8594" x2="191.5391" y1="729.5938" y2="729.5938"/><line style="stroke:#666666;stroke-width:1;" x1="191.5391" x2="191.5391" y1="729.5938" y2="751.5938"/><polygon fill="#666666" points="187.5391,741.5938,191.5391,751.5938,195.5391,741.5938,191.5391,745.5938" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="61.5391" x2="61.5391" y1="785.7266" y2="857.8594"/><line style="stroke:#666666;stroke-width:1;" x1="61.5391" x2="114.5391" y1="857.8594" y2="857.8594"/><polygon fill="#666666" points="104.5391,853.8594,114.5391,857.8594,104.5391,861.8594,108.5391,857.8594" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="191.5391" x2="191.5391" y1="839.8594" y2="857.8594"/><line style="stroke:#666666;stroke-width:1;" x1="191.5391" x2="138.5391" y1="857.8594" y2="857.8594"/><polygon fill="#666666" points="148.5391,853.8594,138.5391,857.8594,148.5391,861.8594,144.5391,857.8594" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="126.5391" x2="126.5391" y1="697.5938" y2="717.5938"/><polygon fill="#666666" points="122.5391,707.5938,126.5391,717.5938,130.5391,707.5938,126.5391,711.5938" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="187.2188" x2="126.5391" y1="641.4609" y2="641.4609"/><line style="stroke:#666666;stroke-width:1;" x1="126.5391" x2="126.5391" y1="641.4609" y2="663.4609"/><polygon fill="#666666" points="122.5391,653.4609,126.5391,663.4609,130.5391,653.4609,126.5391,657.4609" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="270.8594" x2="331.5391" y1="641.4609" y2="641.4609"/><line style="stroke:#666666;stroke-width:1;" x1="331.5391" x2="331.5391" y1="641.4609" y2="663.4609"/><polygon fill="#666666" points="327.5391,653.4609,331.5391,663.4609,335.5391,653.4609,331.5391,657.4609" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="126.5391" x2="126.5391" y1="869.8594" y2="887.8594"/><line style="stroke:#666666;stroke-width:1;" x1="126.5391" x2="217.0391" y1="887.8594" y2="887.8594"/><polygon fill="#666666" points="207.0391,883.8594,217.0391,887.8594,207.0391,891.8594,211.0391,887.8594" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="331.5391" x2="331.5391" y1="697.5938" y2="887.8594"/><line style="stroke:#666666;stroke-width:1;" x1="331.5391" x2="241.0391" y1="887.8594" y2="887.8594"/><polygon fill="#666666" points="251.0391,883.8594,241.0391,887.8594,251.0391,891.8594,247.0391,887.8594" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="609.4609" y2="629.4609"/><polygon fill="#666666" points="225.0391,619.4609,229.0391,629.4609,233.0391,619.4609,229.0391,623.4609" style="stroke:#666666;stroke-width:1;"/><line style="stroke:#666666;stroke-width:1;" x1="229.0391" x2="229.0391" y1="899.8594" y2="919.8594"/><polygon fill="#666666" points="225.0391,909.8594,229.0391,919.8594,233.0391,909.8594,229.0391,913.8594" style="stroke:#666666;stroke-width:1;"/><!--SRC=[VPBBRjD058RtVWfBR98DGY2AI1OefUn0GieJJEsnEwfZMsCdLNP5ZKDeapeLQKgZIcu38GX4OWafoaMbB-FnvIqOnvPncwRZdUVxlpDdpcYxI5O11YKMS3gg8Bsw2RXT4IjbcN-jI0fc7mdFmu_HLaa5yn37rClbkeVQGg2aoFoA5cu8JmNXWK3Q_enx8N1FqZ36obwykR5S3AFf0EjCpfdsoE6L-xdbN5_um-_4F0dwTM9Pplp8MKpo39FpF_H8k-5UpeBzdd_piI2A68f0Xs-H0Bag9y727i3mCL1LgPh9KW6P7YHf9B2PrGGnnrxdnwiig-z0cSrKePPbM3Qthi1j9vGqo6Pa9OgSjxpva3JiBQK4aFoc0cNzVNbRGjeEn4M8AuY3D2BpIA2jfA3DikOU3zpEv7-ZzoaAF51rY8bTJryBGvg6_zLmflEYYf4iiWNQFEA0ZfGe7-gYRjO0IO4xzvK-HB6yhN4OgM7e7P21234JdVc1ggxP9cQN75jaU9HoBRUiWVlfBsdE0gFbzMfHJN_K3xuO_huH3oia6dRoTysCYDaYTist3-WO4vOwoRUQrwwxtPdxvpHFyT0O_skqoQ5rLqU5qJ4YY8oQb0k3wI5Jo1_PvFeqw9pxux5xDY0tP_bemriClSNlE6rCd4KtrH3LB0T_wyL4zToBdtx_LvHBteUcAohp3m00]--></g></svg>