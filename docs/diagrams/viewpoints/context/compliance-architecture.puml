@startuml compliance-architecture

title 合規架構圖

package "合規管理層" as ComplianceLayer {
    component "資料保護控制器" as DataProtectionController
    component "稽核日誌管理" as AuditLogManager
    component "合規監控系統" as ComplianceMonitor
    component "風險評估引擎" as RiskAssessmentEngine
}

package "應用服務層" as ApplicationLayer {
    component "使用者管理服務" as UserManagementService
    component "交易處理服務" as TransactionService
    component "資料分析服務" as DataAnalyticsService
    component "通知服務" as NotificationService
}

package "資料存取層" as DataAccessLayer {
    component "加密資料庫" as EncryptedDatabase
    component "稽核資料庫" as AuditDatabase
    component "備份系統" as BackupSystem
    component "資料歸檔系統" as DataArchiveSystem
}

package "外部合規服務" as ExternalComplianceServices {
    component "身分驗證服務" as IdentityVerification
    component "反洗錢檢查" as AMLCheck
    component "信用評估" as CreditAssessment
    component "稅務申報系統" as TaxReporting
}

cloud "監管機構" as RegulatoryBodies {
    component "個資保護委員會" as PDPC
    component "金融監督管理委員會" as FSC
    component "公平交易委員會" as FTC
    component "國稅局" as TaxAuthority
}

' 合規控制流程
DataProtectionController --> UserManagementService : GDPR/PDPA 控制
DataProtectionController --> DataAnalyticsService : 資料使用授權
AuditLogManager --> TransactionService : 交易記錄稽核
AuditLogManager --> AuditDatabase : 稽核軌跡儲存

ComplianceMonitor --> ApplicationLayer : 即時合規檢查
RiskAssessmentEngine --> TransactionService : 風險評分
RiskAssessmentEngine --> ExternalComplianceServices : 外部風險檢查

' 資料保護措施
ApplicationLayer --> EncryptedDatabase : 加密資料存取
EncryptedDatabase --> BackupSystem : 定期備份
EncryptedDatabase --> DataArchiveSystem : 資料歸檔

' 外部合規整合
UserManagementService --> IdentityVerification : KYC 驗證
TransactionService --> AMLCheck : 反洗錢檢查
TransactionService --> CreditAssessment : 信用評估
TransactionService --> TaxReporting : 稅務資料

' 監管報告
ComplianceLayer --> PDPC : 個資保護報告
ComplianceLayer --> FSC : 金融交易報告
ComplianceLayer --> FTC : 公平交易報告
ComplianceLayer --> TaxAuthority : 稅務申報

note right of DataProtectionController
  個資保護措施:
  - 資料最小化原則
  - 使用目的限制
  - 同意管理機制
  - 資料主體權利保護
  - 跨境傳輸控制
end note

note right of AuditLogManager
  稽核軌跡記錄:
  - 使用者操作記錄
  - 系統存取日誌
  - 資料異動軌跡
  - 權限變更記錄
  - 異常行為偵測
end note

note right of RiskAssessmentEngine
  風險評估項目:
  - 交易異常偵測
  - 使用者行為分析
  - 信用風險評估
  - 洗錢風險檢查
  - 詐欺偵測機制
end note

note bottom of ExternalComplianceServices
  第三方合規服務:
  - 身分驗證 (eKYC)
  - 反洗錢資料庫查詢
  - 信用評分服務
  - 黑名單檢查
  - 制裁名單比對
end note

@enduml