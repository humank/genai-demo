graph TB
    subgraph "External Actors"
        WEB[Web Interface]
        API[REST API]
        CLI[Command Line]
        EXT[External Services]
    end
    
    subgraph "Ports (Interfaces)"
        WP[Web Port]
        AP[API Port]
        CP[CLI Port]
        EP[External Port]
    end
    
    subgraph "Application Core"
        subgraph "Domain Layer"
            AGG[Aggregates]
            ENT[Entities]
            VO[Value Objects]
            DS[Domain Services]
            DE[Domain Events]
        end
        
        subgraph "Application Layer"
            AS[Application Services]
            CH[Command Handlers]
            QH[Query Handlers]
            EH[Event Handlers]
        end
    end
    
    subgraph "Adapters (Implementations)"
        WA[Web Adapter]
        AA[API Adapter]
        CA[CLI Adapter]
        EA[External Adapter]
    end
    
    subgraph "Infrastructure"
        DB[(Database)]
        MSG[Message Queue]
        CACHE[(Cache)]
        FILE[File System]
    end
    
    %% External to Ports
    WEB --> WP
    API --> AP
    CLI --> CP
    EXT --> EP
    
    %% Ports to Adapters
    WP --> WA
    AP --> AA
    CP --> CA
    EP --> EA
    
    %% Adapters to Application Core
    WA --> AS
    AA --> AS
    CA --> AS
    EA --> AS
    
    %% Application Layer to Domain Layer
    AS --> AGG
    CH --> AGG
    QH --> AGG
    EH --> DE
    
    %% Domain Layer relationships
    AGG --> ENT
    AGG --> VO
    AGG --> DS
    AGG --> DE
    
    %% Application Core to Infrastructure
    AS --> DB
    AS --> MSG
    AS --> CACHE
    AS --> FILE
    
    %% Styling
    classDef external fill:#e1f5fe
    classDef port fill:#f3e5f5
    classDef core fill:#e8f5e8
    classDef adapter fill:#fff3e0
    classDef infra fill:#fce4ec
    
    class WEB,API,CLI,EXT external
    class WP,AP,CP,EP port
    class AGG,ENT,VO,DS,DE,AS,CH,QH,EH core
    class WA,AA,CA,EA adapter
    class DB,MSG,CACHE,FILE infra