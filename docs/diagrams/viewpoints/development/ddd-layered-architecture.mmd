graph TB
    subgraph UI ["üñ•Ô∏è Áî®Êà∂ÁïåÈù¢Â±§ (User Interface Layer)"]
        direction LR
        WEB_APP["Web ÊáâÁî®<br/>Next.js 14"]
        MOBILE_APP["ÁßªÂãïÊáâÁî®<br/>Angular 18"]
        ADMIN_PANEL["ÁÆ°ÁêÜÈù¢Êùø<br/>React Admin"]
        API_DOCS["API ÊñáÊ™î<br/>Swagger UI"]
    end
    
    subgraph APP ["‚öôÔ∏è ÊáâÁî®Â±§ (Application Layer)"]
        direction TB
        subgraph CONTROLLERS ["REST Controllers"]
            direction LR
            ORDER_CTRL["OrderController"]
            CUSTOMER_CTRL["CustomerController"]
            PRODUCT_CTRL["ProductController"]
            PAYMENT_CTRL["PaymentController"]
            CART_CTRL["ShoppingCartController"]
            PROMOTION_CTRL["PromotionController"]
        end
        
        subgraph APP_SERVICES ["Application Services"]
            direction LR
            ORDER_APP_SVC["OrderApplicationService"]
            CUSTOMER_APP_SVC["CustomerApplicationService"]
            PRODUCT_APP_SVC["ProductApplicationService"]
            PAYMENT_APP_SVC["PaymentApplicationService"]
            CART_APP_SVC["ShoppingCartApplicationService"]
            INVENTORY_APP_SVC["InventoryApplicationService"]
            PRICING_APP_SVC["PricingApplicationService"]
            PROMOTION_APP_SVC["PromotionApplicationService"]
            NOTIFICATION_APP_SVC["NotificationApplicationService"]
            OBSERVABILITY_APP_SVC["ObservabilityApplicationService"]
            STATS_APP_SVC["StatsApplicationService"]
            MONITORING_APP_SVC["MonitoringApplicationService"]
        end
        
        subgraph DTOS ["DTOs & Event Handling"]
            direction LR
            ORDER_DTO["OrderDTO"]
            CUSTOMER_DTO["CustomerDTO"]
            PRODUCT_DTO["ProductDTO"]
            DTO_MAPPER["DTOMapper"]
            EVENT_HANDLER["DomainEventHandler"]
            EVENT_PUBLISHER["EventPublisher"]
        end
    end
    
    subgraph DOMAIN ["üèõÔ∏è È†òÂüüÂ±§ (Domain Layer)"]
        direction TB
        subgraph AGGREGATES ["Aggregate Roots"]
            direction LR
            ORDER_AGG["Order<br/>@AggregateRoot"]
            CUSTOMER_AGG["Customer<br/>@AggregateRoot"]
            PRODUCT_AGG["Product<br/>@AggregateRoot"]
            PAYMENT_AGG["Payment<br/>@AggregateRoot"]
            CART_AGG["ShoppingCart<br/>@AggregateRoot"]
            INVENTORY_AGG["Inventory<br/>@AggregateRoot"]
            PROMOTION_AGG["Promotion<br/>@AggregateRoot"]
            DELIVERY_AGG["Delivery<br/>@AggregateRoot"]
            NOTIFICATION_AGG["Notification<br/>@AggregateRoot"]
            REVIEW_AGG["Review<br/>@AggregateRoot"]
            SELLER_AGG["Seller<br/>@AggregateRoot"]
            OBSERVABILITY_AGG["Observability<br/>@AggregateRoot"]
        end
        
        subgraph DOMAIN_COMPONENTS ["Domain Components"]
            direction LR
            subgraph ENTITIES ["Entities"]
                ORDER_ITEM["OrderItem"]
                CUSTOMER_PROFILE["CustomerProfile"]
                PRODUCT_VARIANT["ProductVariant"]
                PAYMENT_METHOD["PaymentMethod"]
                CART_ITEM["CartItem"]
            end
            
            subgraph VALUE_OBJECTS ["Value Objects"]
                MONEY["Money"]
                ADDRESS["Address"]
                EMAIL["Email"]
                ORDER_ID["OrderId"]
                CUSTOMER_ID["CustomerId"]
                PRODUCT_ID["ProductId"]
            end
            
            subgraph DOMAIN_EVENTS ["Domain Events"]
                ORDER_CREATED["OrderCreatedEvent"]
                PAYMENT_PROCESSED["PaymentProcessedEvent"]
                CUSTOMER_REGISTERED["CustomerRegisteredEvent"]
                INVENTORY_RESERVED["InventoryReservedEvent"]
                CART_UPDATED["CartUpdatedEvent"]
                PROMOTION_APPLIED["PromotionAppliedEvent"]
            end
        end
        
        subgraph DOMAIN_SERVICES ["Domain Services & Repositories"]
            direction LR
            subgraph DOM_SERVICES ["Domain Services"]
                ORDER_PRICING_SVC["OrderPricingService"]
                PAYMENT_VALIDATION_SVC["PaymentValidationService"]
                PROMOTION_CALCULATION_SVC["PromotionCalculationService"]
                INVENTORY_ALLOCATION_SVC["InventoryAllocationService"]
            end
            
            subgraph REPOSITORIES ["Repository Interfaces"]
                ORDER_REPO_INTF["OrderRepository"]
                CUSTOMER_REPO_INTF["CustomerRepository"]
                PRODUCT_REPO_INTF["ProductRepository"]
                PAYMENT_REPO_INTF["PaymentRepository"]
                INVENTORY_REPO_INTF["InventoryRepository"]
                PROMOTION_REPO_INTF["PromotionRepository"]
            end
            
            subgraph PORTS ["Port Interfaces"]
                PAYMENT_PORT["PaymentPort"]
                NOTIFICATION_PORT["NotificationPort"]
                EVENT_PUBLISHER_PORT["EventPublisherPort"]
                CACHE_PORT["CachePort"]
            end
        end
    end
    
    subgraph INFRA ["üîß Âü∫Á§éË®≠ÊñΩÂ±§ (Infrastructure Layer)"]
        direction TB
        subgraph PERSISTENCE ["Persistence Layer"]
            direction LR
            JPA_ORDER_REPO["JpaOrderRepository"]
            JPA_CUSTOMER_REPO["JpaCustomerRepository"]
            JPA_PRODUCT_REPO["JpaProductRepository"]
            JPA_PAYMENT_REPO["JpaPaymentRepository"]
            JPA_INVENTORY_REPO["JpaInventoryRepository"]
            JPA_PROMOTION_REPO["JpaPromotionRepository"]
        end
        
        subgraph ADAPTERS ["External Adapters"]
            direction LR
            STRIPE_ADAPTER["StripePaymentAdapter"]
            SES_ADAPTER["SesEmailAdapter"]
            SNS_ADAPTER["SnsNotificationAdapter"]
            SMS_ADAPTER["SmsNotificationService"]
            MSK_EVENT_ADAPTER["MskEventAdapter"]
            REDIS_ADAPTER["RedisCacheAdapter"]
            OPENSEARCH_ADAPTER["OpenSearchAdapter"]
        end
        
        subgraph CONFIG ["Configuration"]
            direction LR
            DEV_CONFIG["DevelopmentConfiguration"]
            PROD_CONFIG["ProductionConfiguration"]
            PROFILE_VALIDATOR["ProfileActivationValidator"]
        end
    end
    
    subgraph STORAGE ["üíæ Êï∏ÊìöÂ≠òÂÑ≤Â±§ (Data Storage Layer)"]
        direction LR
        POSTGRESQL[("PostgreSQL<br/>‰∏ªË≥áÊñôÂ∫´")]
        H2_DB[("H2 Database<br/>ÈñãÁôºÊ∏¨Ë©¶")]
        REDIS_CACHE[("Redis<br/>Âø´Âèñ")]
        OPENSEARCH_DB[("OpenSearch<br/>ÊêúÂ∞ã")]
        MSK_STREAM[("MSK<br/>‰∫ã‰ª∂ÊµÅ")]
        S3_STORAGE[("S3<br/>Â∞çË±°Â≠òÂÑ≤")]
    end
    
    %% Layer Dependencies
    UI --> APP
    APP --> DOMAIN
    DOMAIN --> INFRA
    INFRA --> STORAGE
    
    %% Key Connections
    WEB_APP --> ORDER_CTRL
    MOBILE_APP --> CART_CTRL
    ADMIN_PANEL --> STATS_APP_SVC
    
    ORDER_CTRL --> ORDER_APP_SVC
    CUSTOMER_CTRL --> CUSTOMER_APP_SVC
    PRODUCT_CTRL --> PRODUCT_APP_SVC
    PAYMENT_CTRL --> PAYMENT_APP_SVC
    CART_CTRL --> CART_APP_SVC
    PROMOTION_CTRL --> PROMOTION_APP_SVC
    
    ORDER_APP_SVC --> ORDER_AGG
    CUSTOMER_APP_SVC --> CUSTOMER_AGG
    PRODUCT_APP_SVC --> PRODUCT_AGG
    PAYMENT_APP_SVC --> PAYMENT_AGG
    CART_APP_SVC --> CART_AGG
    INVENTORY_APP_SVC --> INVENTORY_AGG
    PRICING_APP_SVC --> ORDER_PRICING_SVC
    PROMOTION_APP_SVC --> PROMOTION_AGG
    NOTIFICATION_APP_SVC --> NOTIFICATION_AGG
    OBSERVABILITY_APP_SVC --> OBSERVABILITY_AGG
    
    ORDER_AGG --> ORDER_CREATED
    PAYMENT_AGG --> PAYMENT_PROCESSED
    CUSTOMER_AGG --> CUSTOMER_REGISTERED
    INVENTORY_AGG --> INVENTORY_RESERVED
    CART_AGG --> CART_UPDATED
    PROMOTION_AGG --> PROMOTION_APPLIED
    
    ORDER_CREATED --> EVENT_HANDLER
    PAYMENT_PROCESSED --> EVENT_HANDLER
    CUSTOMER_REGISTERED --> EVENT_HANDLER
    EVENT_HANDLER --> EVENT_PUBLISHER
    
    ORDER_APP_SVC --> ORDER_REPO_INTF
    CUSTOMER_APP_SVC --> CUSTOMER_REPO_INTF
    PRODUCT_APP_SVC --> PRODUCT_REPO_INTF
    PAYMENT_APP_SVC --> PAYMENT_REPO_INTF
    INVENTORY_APP_SVC --> INVENTORY_REPO_INTF
    PROMOTION_APP_SVC --> PROMOTION_REPO_INTF
    
    PAYMENT_APP_SVC --> PAYMENT_PORT
    NOTIFICATION_APP_SVC --> NOTIFICATION_PORT
    ORDER_APP_SVC --> EVENT_PUBLISHER_PORT
    PRODUCT_APP_SVC --> CACHE_PORT
    
    ORDER_REPO_INTF -.-> JPA_ORDER_REPO
    CUSTOMER_REPO_INTF -.-> JPA_CUSTOMER_REPO
    PRODUCT_REPO_INTF -.-> JPA_PRODUCT_REPO
    PAYMENT_REPO_INTF -.-> JPA_PAYMENT_REPO
    INVENTORY_REPO_INTF -.-> JPA_INVENTORY_REPO
    PROMOTION_REPO_INTF -.-> JPA_PROMOTION_REPO
    
    PAYMENT_PORT -.-> STRIPE_ADAPTER
    NOTIFICATION_PORT -.-> SES_ADAPTER
    NOTIFICATION_PORT -.-> SNS_ADAPTER
    EVENT_PUBLISHER_PORT -.-> MSK_EVENT_ADAPTER
    CACHE_PORT -.-> REDIS_ADAPTER
    
    JPA_ORDER_REPO --> POSTGRESQL
    JPA_CUSTOMER_REPO --> POSTGRESQL
    JPA_PRODUCT_REPO --> POSTGRESQL
    JPA_PAYMENT_REPO --> POSTGRESQL
    JPA_INVENTORY_REPO --> POSTGRESQL
    JPA_PROMOTION_REPO --> POSTGRESQL
    
    DEV_CONFIG --> H2_DB
    PROD_CONFIG --> POSTGRESQL
    REDIS_ADAPTER --> REDIS_CACHE
    OPENSEARCH_ADAPTER --> OPENSEARCH_DB
    MSK_EVENT_ADAPTER --> MSK_STREAM
    
    classDef ui fill:#e3f2fd,stroke:#0277bd,stroke-width:2px
    classDef application fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef domain fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef infrastructure fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef storage fill:#fafafa,stroke:#616161,stroke-width:2px
    
    class WEB_APP,MOBILE_APP,ADMIN_PANEL,API_DOCS ui
    class ORDER_CTRL,CUSTOMER_CTRL,PRODUCT_CTRL,PAYMENT_CTRL,CART_CTRL,PROMOTION_CTRL,ORDER_APP_SVC,CUSTOMER_APP_SVC,PRODUCT_APP_SVC,PAYMENT_APP_SVC,CART_APP_SVC,INVENTORY_APP_SVC,PRICING_APP_SVC,PROMOTION_APP_SVC,NOTIFICATION_APP_SVC,OBSERVABILITY_APP_SVC,STATS_APP_SVC,MONITORING_APP_SVC,ORDER_DTO,CUSTOMER_DTO,PRODUCT_DTO,DTO_MAPPER,EVENT_HANDLER,EVENT_PUBLISHER application
    class ORDER_AGG,CUSTOMER_AGG,PRODUCT_AGG,PAYMENT_AGG,CART_AGG,INVENTORY_AGG,PROMOTION_AGG,DELIVERY_AGG,NOTIFICATION_AGG,REVIEW_AGG,SELLER_AGG,OBSERVABILITY_AGG,ORDER_ITEM,CUSTOMER_PROFILE,PRODUCT_VARIANT,PAYMENT_METHOD,CART_ITEM,MONEY,ADDRESS,EMAIL,ORDER_ID,CUSTOMER_ID,PRODUCT_ID,ORDER_CREATED,PAYMENT_PROCESSED,CUSTOMER_REGISTERED,INVENTORY_RESERVED,CART_UPDATED,PROMOTION_APPLIED,ORDER_PRICING_SVC,PAYMENT_VALIDATION_SVC,PROMOTION_CALCULATION_SVC,INVENTORY_ALLOCATION_SVC,ORDER_REPO_INTF,CUSTOMER_REPO_INTF,PRODUCT_REPO_INTF,PAYMENT_REPO_INTF,INVENTORY_REPO_INTF,PROMOTION_REPO_INTF,PAYMENT_PORT,NOTIFICATION_PORT,EVENT_PUBLISHER_PORT,CACHE_PORT domain
    class JPA_ORDER_REPO,JPA_CUSTOMER_REPO,JPA_PRODUCT_REPO,JPA_PAYMENT_REPO,JPA_INVENTORY_REPO,JPA_PROMOTION_REPO,STRIPE_ADAPTER,SES_ADAPTER,SNS_ADAPTER,SMS_ADAPTER,MSK_EVENT_ADAPTER,REDIS_ADAPTER,OPENSEARCH_ADAPTER,DEV_CONFIG,PROD_CONFIG,PROFILE_VALIDATOR infrastructure
    class POSTGRESQL,H2_DB,REDIS_CACHE,OPENSEARCH_DB,MSK_STREAM,S3_STORAGE storage