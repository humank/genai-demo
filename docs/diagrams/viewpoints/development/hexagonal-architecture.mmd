graph TB
    subgraph ACTORS ["External Actors"]
        CUSTOMER[ğŸ‘¤ Customer<br/>Web & Mobile Users]
        ADMIN[ğŸ‘¨â€ğŸ’¼ Admin<br/>Management Dashboard]
        DELIVERY[ğŸšš Delivery Person<br/>Logistics Interface]
    end
    
    subgraph EXTERNAL ["External Systems"]
        STRIPE[ğŸ’³ Stripe Payment<br/>Payment Processing]
        EMAIL[ğŸ“§ Email Service<br/>SES/SMTP]
        SMS[ğŸ“± SMS Service<br/>SNS/Twilio]
        POSTGRES[(ğŸ—„ï¸ PostgreSQL<br/>Primary Database)]
        REDIS[(âš¡ Redis Cache<br/>Session & Cache)]
        MSK[ğŸ“Š MSK/Kafka<br/>Event Streaming]
    end
    
    subgraph PRIMARY_ADAPTERS ["Primary Adapters (Driving Side)"]
        WEB_UI[ğŸŒ Web UI<br/>Next.js Frontend]
        MOBILE_UI[ğŸ“± Mobile UI<br/>Angular App]
        ADMIN_UI[ğŸ–¥ï¸ Admin Dashboard<br/>Management Interface]
        REST_API[ğŸ”Œ REST Controllers<br/>HTTP API Endpoints]
        GRAPHQL[ğŸ“¡ GraphQL API<br/>Query Interface]
    end
    
    subgraph APPLICATION ["Application Layer"]
        CUSTOMER_APP[ğŸ‘¤ CustomerApplicationService<br/>Customer Management]
        ORDER_APP[ğŸ“¦ OrderApplicationService<br/>Order Processing]
        PRODUCT_APP[ğŸ›ï¸ ProductApplicationService<br/>Product Management]
        PAYMENT_APP[ğŸ’° PaymentApplicationService<br/>Payment Processing]
        CART_APP[ğŸ›’ ShoppingCartApplicationService<br/>Cart Management]
        INVENTORY_APP[ğŸ“Š InventoryApplicationService<br/>Stock Management]
        PRICING_APP[ğŸ’² PricingApplicationService<br/>Price Calculation]
        PROMOTION_APP[ğŸ PromotionApplicationService<br/>Discount Management]
        NOTIFICATION_APP[ğŸ”” NotificationApplicationService<br/>Message Delivery]
        OBSERVABILITY_APP[ğŸ“ˆ ObservabilityApplicationService<br/>Monitoring & Metrics]
        STATS_APP[ğŸ“Š StatsApplicationService<br/>Analytics & Reports]
        MONITORING_APP[ğŸ” MonitoringApplicationService<br/>Health Checks]
    end
    
    subgraph DOMAIN_CORE ["Domain Core (Hexagon)"]
        subgraph AGGREGATES ["Aggregate Roots"]
            CUSTOMER_AGG[ğŸ‘¤ Customer<br/>@AggregateRoot<br/>Customer Lifecycle]
            ORDER_AGG[ğŸ“¦ Order<br/>@AggregateRoot<br/>Order Management]
            PRODUCT_AGG[ğŸ›ï¸ Product<br/>@AggregateRoot<br/>Product Catalog]
            PAYMENT_AGG[ğŸ’° Payment<br/>@AggregateRoot<br/>Payment Processing]
            CART_AGG[ğŸ›’ ShoppingCart<br/>@AggregateRoot<br/>Cart State]
            INVENTORY_AGG[ğŸ“Š Inventory<br/>@AggregateRoot<br/>Stock Control]
            PROMOTION_AGG[ğŸ Promotion<br/>@AggregateRoot<br/>Discount Rules]
            DELIVERY_AGG[ğŸšš Delivery<br/>@AggregateRoot<br/>Shipping Info]
            NOTIFICATION_AGG[ğŸ”” Notification<br/>@AggregateRoot<br/>Message Queue]
            REVIEW_AGG[â­ Review<br/>@AggregateRoot<br/>Product Reviews]
            SELLER_AGG[ğŸª Seller<br/>@AggregateRoot<br/>Vendor Management]
            OBSERVABILITY_AGG[ğŸ“ˆ Observability<br/>@AggregateRoot<br/>Metrics Collection]
        end
        
        subgraph DOMAIN_SERVICES ["Domain Services"]
            ORDER_DOMAIN_SVC[ğŸ“¦ OrderDomainService<br/>Complex Order Logic]
            PRICING_DOMAIN_SVC[ğŸ’² PricingDomainService<br/>Pricing Algorithms]
            PROMOTION_DOMAIN_SVC[ğŸ PromotionDomainService<br/>Discount Calculations]
        end
        
        subgraph REPOSITORY_PORTS ["Repository Ports"]
            CUSTOMER_REPO_PORT[ğŸ‘¤ CustomerRepository<br/>Interface]
            ORDER_REPO_PORT[ğŸ“¦ OrderRepository<br/>Interface]
            PRODUCT_REPO_PORT[ğŸ›ï¸ ProductRepository<br/>Interface]
            PAYMENT_REPO_PORT[ğŸ’° PaymentRepository<br/>Interface]
            INVENTORY_REPO_PORT[ğŸ“Š InventoryRepository<br/>Interface]
            PROMOTION_REPO_PORT[ğŸ PromotionRepository<br/>Interface]
        end
        
        subgraph SERVICE_PORTS ["Service Ports"]
            PAYMENT_PORT[ğŸ’³ PaymentPort<br/>Payment Gateway Interface]
            NOTIFICATION_PORT[ğŸ”” NotificationPort<br/>Messaging Interface]
            EVENT_PORT[ğŸ“¡ EventPublisherPort<br/>Event Streaming Interface]
            CACHE_PORT[âš¡ CachePort<br/>Caching Interface]
        end
    end
    
    subgraph SECONDARY_ADAPTERS ["Secondary Adapters (Driven Side)"]
        subgraph PERSISTENCE ["Persistence Adapters"]
            JPA_CUSTOMER[ğŸ‘¤ JpaCustomerRepository<br/>Customer Data Access]
            JPA_ORDER[ğŸ“¦ JpaOrderRepository<br/>Order Data Access]
            JPA_PRODUCT[ğŸ›ï¸ JpaProductRepository<br/>Product Data Access]
            JPA_PAYMENT[ğŸ’° JpaPaymentRepository<br/>Payment Data Access]
            JPA_INVENTORY[ğŸ“Š JpaInventoryRepository<br/>Inventory Data Access]
            JPA_PROMOTION[ğŸ JpaPromotionRepository<br/>Promotion Data Access]
        end
        
        subgraph EXTERNAL_ADAPTERS ["External Service Adapters"]
            STRIPE_ADAPTER[ğŸ’³ StripePaymentAdapter<br/>Stripe Integration]
            EMAIL_ADAPTER[ğŸ“§ EmailNotificationAdapter<br/>Email Service Integration]
            SMS_ADAPTER[ğŸ“± SmsNotificationAdapter<br/>SMS Service Integration]
        end
        
        subgraph EVENT_ADAPTERS ["Event & Cache Adapters"]
            MSK_ADAPTER[ğŸ“Š MskEventAdapter<br/>Kafka Event Publishing]
            MEMORY_EVENT_ADAPTER[ğŸ§  InMemoryEventAdapter<br/>Development Events]
            REDIS_ADAPTER[âš¡ RedisCacheAdapter<br/>Cache Management]
            OPENSEARCH_ADAPTER[ğŸ” OpenSearchAdapter<br/>Search & Analytics]
        end
    end
    
    %% Primary Flow (Inbound)
    CUSTOMER --> WEB_UI
    CUSTOMER --> MOBILE_UI
    ADMIN --> ADMIN_UI
    DELIVERY --> REST_API
    
    WEB_UI --> REST_API
    MOBILE_UI --> REST_API
    ADMIN_UI --> REST_API
    REST_API --> GRAPHQL
    
    REST_API --> CUSTOMER_APP
    REST_API --> ORDER_APP
    REST_API --> PRODUCT_APP
    REST_API --> PAYMENT_APP
    REST_API --> CART_APP
    REST_API --> INVENTORY_APP
    REST_API --> PRICING_APP
    REST_API --> PROMOTION_APP
    REST_API --> NOTIFICATION_APP
    REST_API --> OBSERVABILITY_APP
    REST_API --> STATS_APP
    REST_API --> MONITORING_APP
    
    %% Application to Domain
    CUSTOMER_APP --> CUSTOMER_AGG
    ORDER_APP --> ORDER_AGG
    ORDER_APP --> ORDER_DOMAIN_SVC
    PRODUCT_APP --> PRODUCT_AGG
    PAYMENT_APP --> PAYMENT_AGG
    CART_APP --> CART_AGG
    INVENTORY_APP --> INVENTORY_AGG
    PRICING_APP --> PRICING_DOMAIN_SVC
    PROMOTION_APP --> PROMOTION_AGG
    PROMOTION_APP --> PROMOTION_DOMAIN_SVC
    NOTIFICATION_APP --> NOTIFICATION_AGG
    OBSERVABILITY_APP --> OBSERVABILITY_AGG
    
    %% Domain to Repository Ports
    CUSTOMER_APP --> CUSTOMER_REPO_PORT
    ORDER_APP --> ORDER_REPO_PORT
    PRODUCT_APP --> PRODUCT_REPO_PORT
    PAYMENT_APP --> PAYMENT_REPO_PORT
    INVENTORY_APP --> INVENTORY_REPO_PORT
    PROMOTION_APP --> PROMOTION_REPO_PORT
    
    %% Domain to Service Ports
    PAYMENT_APP --> PAYMENT_PORT
    NOTIFICATION_APP --> NOTIFICATION_PORT
    ORDER_APP --> EVENT_PORT
    PRODUCT_APP --> CACHE_PORT
    
    %% Secondary Flow (Outbound) - Repository Implementations
    CUSTOMER_REPO_PORT -.-> JPA_CUSTOMER
    ORDER_REPO_PORT -.-> JPA_ORDER
    PRODUCT_REPO_PORT -.-> JPA_PRODUCT
    PAYMENT_REPO_PORT -.-> JPA_PAYMENT
    INVENTORY_REPO_PORT -.-> JPA_INVENTORY
    PROMOTION_REPO_PORT -.-> JPA_PROMOTION
    
    %% Secondary Flow (Outbound) - Service Implementations
    PAYMENT_PORT -.-> STRIPE_ADAPTER
    NOTIFICATION_PORT -.-> EMAIL_ADAPTER
    NOTIFICATION_PORT -.-> SMS_ADAPTER
    EVENT_PORT -.-> MSK_ADAPTER
    EVENT_PORT -.-> MEMORY_EVENT_ADAPTER
    CACHE_PORT -.-> REDIS_ADAPTER
    CACHE_PORT -.-> OPENSEARCH_ADAPTER
    
    %% External System Connections
    JPA_CUSTOMER --> POSTGRES
    JPA_ORDER --> POSTGRES
    JPA_PRODUCT --> POSTGRES
    JPA_PAYMENT --> POSTGRES
    JPA_INVENTORY --> POSTGRES
    JPA_PROMOTION --> POSTGRES
    
    STRIPE_ADAPTER --> STRIPE
    EMAIL_ADAPTER --> EMAIL
    SMS_ADAPTER --> SMS
    MSK_ADAPTER --> MSK
    REDIS_ADAPTER --> REDIS
    
    %% Styling
    classDef actor fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef external fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef primary fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef application fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef domain fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef secondary fill:#fafafa,stroke:#616161,stroke-width:2px
    
    class CUSTOMER,ADMIN,DELIVERY actor
    class STRIPE,EMAIL,SMS,POSTGRES,REDIS,MSK external
    class WEB_UI,MOBILE_UI,ADMIN_UI,REST_API,GRAPHQL primary
    class CUSTOMER_APP,ORDER_APP,PRODUCT_APP,PAYMENT_APP,CART_APP,INVENTORY_APP,PRICING_APP,PROMOTION_APP,NOTIFICATION_APP,OBSERVABILITY_APP,STATS_APP,MONITORING_APP application
    class CUSTOMER_AGG,ORDER_AGG,PRODUCT_AGG,PAYMENT_AGG,CART_AGG,INVENTORY_AGG,PROMOTION_AGG,DELIVERY_AGG,NOTIFICATION_AGG,REVIEW_AGG,SELLER_AGG,OBSERVABILITY_AGG,ORDER_DOMAIN_SVC,PRICING_DOMAIN_SVC,PROMOTION_DOMAIN_SVC,CUSTOMER_REPO_PORT,ORDER_REPO_PORT,PRODUCT_REPO_PORT,PAYMENT_REPO_PORT,INVENTORY_REPO_PORT,PROMOTION_REPO_PORT,PAYMENT_PORT,NOTIFICATION_PORT,EVENT_PORT,CACHE_PORT domain
    class JPA_CUSTOMER,JPA_ORDER,JPA_PRODUCT,JPA_PAYMENT,JPA_INVENTORY,JPA_PROMOTION,STRIPE_ADAPTER,EMAIL_ADAPTER,SMS_ADAPTER,MSK_ADAPTER,MEMORY_EVENT_ADAPTER,REDIS_ADAPTER,OPENSEARCH_ADAPTER secondary