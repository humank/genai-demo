graph TB
    %% Test Pyramid - Testing Strategy Visualization
    %% Shows the distribution and characteristics of different test types
    
    subgraph "Test Pyramid Structure"
        subgraph "E2E Tests (5%)"
            E2E_LAYER[End-to-End Tests<br/>üî∫ Slow, Expensive, Brittle<br/>üî∫ Full system integration<br/>üî∫ User journey validation<br/>üî∫ < 3s execution, < 500MB memory]
            
            E2E_EXAMPLES[E2E Test Examples:<br/>‚Ä¢ Complete order processing flow<br/>‚Ä¢ User registration to first purchase<br/>‚Ä¢ Payment processing end-to-end<br/>‚Ä¢ Multi-service integration scenarios<br/>‚Ä¢ Cross-browser compatibility]
        end
        
        subgraph "Integration Tests (15%)"
            INT_LAYER[Integration Tests<br/>üî∂ Medium speed, Medium cost<br/>üî∂ Component interaction<br/>üî∂ Database integration<br/>üî∂ < 500ms execution, < 50MB memory]
            
            INT_EXAMPLES[Integration Test Examples:<br/>‚Ä¢ Repository database operations<br/>‚Ä¢ REST API endpoint testing<br/>‚Ä¢ Message queue integration<br/>‚Ä¢ External service integration<br/>‚Ä¢ Spring context loading]
        end
        
        subgraph "Unit Tests (80%)"
            UNIT_LAYER[Unit Tests<br/>üü¢ Fast, Cheap, Reliable<br/>üü¢ Isolated components<br/>üü¢ Business logic focus<br/>üü¢ < 50ms execution, < 5MB memory]
            
            UNIT_EXAMPLES[Unit Test Examples:<br/>‚Ä¢ Domain logic validation<br/>‚Ä¢ Business rule enforcement<br/>‚Ä¢ Calculation accuracy<br/>‚Ä¢ Value object behavior<br/>‚Ä¢ Service method logic]
        end
    end
    
    %% Test Pyramid Layers
    E2E_LAYER --> INT_LAYER
    INT_LAYER --> UNIT_LAYER
    
    %% Detailed Test Categories
    subgraph "Unit Test Categories"
        DOMAIN_TESTS[Domain Tests<br/>MockitoExtension<br/>‚Ä¢ Aggregate root behavior<br/>‚Ä¢ Value object validation<br/>‚Ä¢ Domain service logic<br/>‚Ä¢ Business rule enforcement]
        
        SERVICE_TESTS[Service Tests<br/>MockitoExtension<br/>‚Ä¢ Application service logic<br/>‚Ä¢ Use case implementation<br/>‚Ä¢ Mock external dependencies<br/>‚Ä¢ Command/query handling]
        
        UTIL_TESTS[Utility Tests<br/>MockitoExtension<br/>‚Ä¢ Helper method testing<br/>‚Ä¢ Configuration validation<br/>‚Ä¢ Mapper/converter logic<br/>‚Ä¢ Algorithm implementation]
    end
    
    subgraph "Integration Test Categories"
        REPO_TESTS[Repository Tests<br/>@DataJpaTest<br/>‚Ä¢ Database query validation<br/>‚Ä¢ Entity relationship testing<br/>‚Ä¢ Custom query implementation<br/>‚Ä¢ Transaction behavior]
        
        WEB_TESTS[Web Layer Tests<br/>@WebMvcTest<br/>‚Ä¢ Controller endpoint testing<br/>‚Ä¢ Request/response validation<br/>‚Ä¢ Security configuration<br/>‚Ä¢ Error handling]
        
        SLICE_TESTS[Spring Slice Tests<br/>@JsonTest, @JdbcTest<br/>‚Ä¢ Specific layer testing<br/>‚Ä¢ Minimal context loading<br/>‚Ä¢ Focused integration<br/>‚Ä¢ Performance optimized]
    end
    
    subgraph "E2E Test Categories"
        JOURNEY_TESTS[User Journey Tests<br/>SpringBootTest with RANDOM_PORT<br/>‚Ä¢ Complete business flows<br/>‚Ä¢ Multi-service interaction<br/>‚Ä¢ Real database usage<br/>‚Ä¢ Full Spring context]
        
        CONTRACT_TESTS[Contract Tests<br/>SpringBootTest annotation<br/>‚Ä¢ API contract validation<br/>‚Ä¢ Service interface testing<br/>‚Ä¢ Backward compatibility<br/>‚Ä¢ Consumer-driven contracts]
        
        SMOKE_TESTS[Smoke Tests<br/>@SpringBootTest<br/>‚Ä¢ Critical path validation<br/>‚Ä¢ Deployment verification<br/>‚Ä¢ Health check testing<br/>‚Ä¢ Basic functionality]
    end
    
    %% Test Performance Monitoring
    subgraph "Test Performance Standards"
        UNIT_PERF[Unit Test Performance<br/>@TestPerformanceExtension<br/>‚Ä¢ Execution time: < 50ms<br/>‚Ä¢ Memory usage: < 5MB<br/>‚Ä¢ Success rate: > 99%<br/>‚Ä¢ No external dependencies]
        
        INT_PERF[Integration Test Performance<br/>@TestPerformanceExtension<br/>‚Ä¢ Execution time: < 500ms<br/>‚Ä¢ Memory usage: < 50MB<br/>‚Ä¢ Success rate: > 95%<br/>‚Ä¢ Controlled dependencies]
        
        E2E_PERF[E2E Test Performance<br/>@TestPerformanceExtension<br/>‚Ä¢ Execution time: < 3s<br/>‚Ä¢ Memory usage: < 500MB<br/>‚Ä¢ Success rate: > 90%<br/>‚Ä¢ Full system load]
    end
    
    %% Test Tools and Frameworks
    subgraph "Testing Tools by Layer"
        UNIT_TOOLS[Unit Test Tools<br/>‚Ä¢ JUnit 5: Test framework<br/>‚Ä¢ Mockito: Mocking framework<br/>‚Ä¢ AssertJ: Fluent assertions<br/>‚Ä¢ TestDataBuilder: Test data creation]
        
        INT_TOOLS[Integration Test Tools<br/>‚Ä¢ Spring Boot Test: Context loading<br/>‚Ä¢ TestContainers: Database testing<br/>‚Ä¢ WireMock: External service mocking<br/>‚Ä¢ TestRestTemplate: HTTP testing]
        
        E2E_TOOLS[E2E Test Tools<br/>‚Ä¢ Selenium: Browser automation<br/>‚Ä¢ Cucumber: BDD scenarios<br/>‚Ä¢ REST Assured: API testing<br/>‚Ä¢ Allure: Test reporting]
    end
    
    %% Test Strategy Guidelines
    subgraph "Test Strategy Guidelines"
        FAST_FEEDBACK[Fast Feedback Loop<br/>‚Ä¢ Unit tests run in < 2 minutes<br/>‚Ä¢ Integration tests in < 5 minutes<br/>‚Ä¢ E2E tests in < 30 minutes<br/>‚Ä¢ Fail fast on critical issues]
        
        ISOLATION[Test Isolation<br/>‚Ä¢ Independent test execution<br/>‚Ä¢ No shared state between tests<br/>‚Ä¢ Clean setup/teardown<br/>‚Ä¢ Deterministic results]
        
        MAINTAINABILITY[Test Maintainability<br/>‚Ä¢ Clear test naming<br/>‚Ä¢ DRY principle application<br/>‚Ä¢ Page Object pattern for UI<br/>‚Ä¢ Regular refactoring]
    end
    
    %% Test Execution Strategy
    subgraph "Test Execution Strategy"
        DAILY_DEV[Daily Development<br/>./gradlew quickTest<br/>‚Ä¢ Unit tests only<br/>‚Ä¢ Fast feedback under 2 min<br/>‚Ä¢ TDD cycle support]
        
        PRE_COMMIT[Pre-Commit<br/>./gradlew preCommitTest<br/>‚Ä¢ Unit + Integration tests<br/>‚Ä¢ Quality assurance under 5 min<br/>‚Ä¢ CI/CD gate]
        
        PRE_RELEASE[Pre-Release<br/>./gradlew fullTest<br/>‚Ä¢ All test types<br/>‚Ä¢ Complete validation under 30 min<br/>‚Ä¢ Release readiness]
    end
    
    %% Test Coverage and Quality
    subgraph "Coverage and Quality Metrics"
        COVERAGE_TARGETS[Coverage Targets<br/>‚Ä¢ Unit tests: > 90% line coverage<br/>‚Ä¢ Integration tests: > 80% feature coverage<br/>‚Ä¢ E2E tests: > 95% critical path coverage<br/>‚Ä¢ Overall: > 80% code coverage]
        
        QUALITY_METRICS[Quality Metrics<br/>‚Ä¢ Test execution time trends<br/>‚Ä¢ Test failure rate analysis<br/>‚Ä¢ Code coverage evolution<br/>‚Ä¢ Test maintenance effort]
    end
    
    %% Anti-patterns to Avoid
    subgraph "Test Anti-patterns to Avoid"
        ICE_CREAM[‚ùå Ice Cream Cone<br/>Too many E2E tests<br/>Few unit tests<br/>Slow feedback<br/>High maintenance cost]
        
        TESTING_TROPHY[‚ùå Testing Trophy Misuse<br/>Overemphasis on integration<br/>Neglecting unit tests<br/>Complex test setup<br/>Flaky test results]
        
        NO_TESTS[‚ùå No Testing Strategy<br/>Manual testing only<br/>No automation<br/>High defect rate<br/>Slow delivery]
    end
    
    %% Best Practices
    subgraph "Testing Best Practices"
        AAA_PATTERN[AAA Pattern<br/>‚Ä¢ Arrange: Set up test data<br/>‚Ä¢ Act: Execute the behavior<br/>‚Ä¢ Assert: Verify the outcome<br/>‚Ä¢ Clear test structure]
        
        GIVEN_WHEN_THEN[Given-When-Then<br/>‚Ä¢ Given: Initial context<br/>‚Ä¢ When: Action performed<br/>‚Ä¢ Then: Expected result<br/>‚Ä¢ BDD-style clarity]
        
        TEST_NAMING[Test Naming<br/>‚Ä¢ should_return_error_when_email_invalid<br/>‚Ä¢ Descriptive method names<br/>‚Ä¢ Business behavior focus<br/>‚Ä¢ Self-documenting tests]
    end
    
    %% Styling
    classDef e2eStyle fill:#ffebee,stroke:#c62828,stroke-width:3px
    classDef integrationStyle fill:#fff3e0,stroke:#ef6c00,stroke-width:3px
    classDef unitStyle fill:#e8f5e8,stroke:#2e7d32,stroke-width:3px
    classDef toolStyle fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef practiceStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef antipatternStyle fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef performanceStyle fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    
    class E2E_LAYER,E2E_EXAMPLES,JOURNEY_TESTS,CONTRACT_TESTS,SMOKE_TESTS,E2E_PERF,E2E_TOOLS e2eStyle
    class INT_LAYER,INT_EXAMPLES,REPO_TESTS,WEB_TESTS,SLICE_TESTS,INT_PERF,INT_TOOLS integrationStyle
    class UNIT_LAYER,UNIT_EXAMPLES,DOMAIN_TESTS,SERVICE_TESTS,UTIL_TESTS,UNIT_PERF,UNIT_TOOLS unitStyle
    class DAILY_DEV,PRE_COMMIT,PRE_RELEASE,FAST_FEEDBACK,ISOLATION,MAINTAINABILITY toolStyle
    class AAA_PATTERN,GIVEN_WHEN_THEN,TEST_NAMING,COVERAGE_TARGETS,QUALITY_METRICS practiceStyle
    class ICE_CREAM,TESTING_TROPHY,NO_TESTS antipatternStyle
    class UNIT_PERF,INT_PERF,E2E_PERF performanceStyle