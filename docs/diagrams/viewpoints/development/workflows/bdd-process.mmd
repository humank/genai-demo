flowchart TD
    %% BDD (Behavior-Driven Development) Process
    %% Shows the complete BDD workflow from user story to implementation
    
    START([User Story]) --> DISCOVERY[Discovery Phase<br/>Understand Requirements]
    
    %% Discovery Phase
    DISCOVERY --> STAKEHOLDERS[Gather Stakeholders<br/>Product Owner, Developer, Tester]
    STAKEHOLDERS --> EXAMPLES[Create Examples<br/>Concrete scenarios]
    EXAMPLES --> RULES[Define Business Rules<br/>Acceptance criteria]
    
    %% Formulation Phase
    RULES --> GHERKIN[Write Gherkin Scenarios<br/>Given-When-Then format]
    GHERKIN --> REVIEW_SCENARIOS{Scenarios Review}
    REVIEW_SCENARIOS -->|Need Changes| EXAMPLES
    REVIEW_SCENARIOS -->|Approved| LIVING_DOC[Living Documentation<br/>Executable specifications]
    
    %% Implementation Phase
    LIVING_DOC --> STEP_DEFS[Implement Step Definitions<br/>Cucumber/Java integration]
    STEP_DEFS --> RUN_SCENARIOS[Run Scenarios<br/>Red phase - failing tests]
    RUN_SCENARIOS --> IMPLEMENT[Implement Application Code<br/>Make scenarios pass]
    IMPLEMENT --> GREEN_SCENARIOS[Green Phase<br/>All scenarios passing]
    
    %% Refinement Phase
    GREEN_SCENARIOS --> REFACTOR_CODE[Refactor Code<br/>Improve implementation]
    REFACTOR_CODE --> REFACTOR_SCENARIOS[Refactor Scenarios<br/>Improve readability]
    REFACTOR_SCENARIOS --> AUTOMATION[Automate Scenarios<br/>CI/CD integration]
    
    AUTOMATION --> MORE_SCENARIOS{More Scenarios Needed?}
    MORE_SCENARIOS -->|Yes| EXAMPLES
    MORE_SCENARIOS -->|No| COMPLETE([Feature Complete])
    
    %% Detailed BDD Components
    subgraph "Gherkin Language Structure"
        FEATURE[Feature: High-level description<br/>As a... I want... So that...]
        SCENARIO[Scenario: Specific example<br/>Concrete behavior description]
        GIVEN[Given: Initial context<br/>Preconditions and setup]
        WHEN[When: Action or event<br/>User interaction or trigger]
        THEN[Then: Expected outcome<br/>Verification and assertions]
        
        FEATURE --> SCENARIO
        SCENARIO --> GIVEN
        GIVEN --> WHEN
        WHEN --> THEN
    end
    
    subgraph "Example Gherkin Scenario"
        EXAMPLE_FEATURE[Feature: Customer Registration<br/>As a new user<br/>I want to register an account<br/>So that I can access the system]
        
        EXAMPLE_SCENARIO[Scenario: Successful registration<br/>Given a new customer with valid information<br/>When they submit the registration form<br/>Then they should receive a confirmation email<br/>And their account should be created]
        
        EXAMPLE_FEATURE --> EXAMPLE_SCENARIO
    end
    
    subgraph "Step Definition Implementation"
        STEP_GIVEN[Step Definition - Given:<br/>@Given annotation<br/>Setup test data<br/>Prepare test context]
        
        STEP_WHEN[Step Definition - When:<br/>@When annotation<br/>Execute business action<br/>Trigger system behavior]
        
        STEP_THEN[Step Definition - Then:<br/>@Then annotation<br/>Verify expected results<br/>Assert system state]
        
        STEP_GIVEN --> STEP_WHEN
        STEP_WHEN --> STEP_THEN
    end
    
    %% BDD Benefits and Practices
    subgraph "BDD Benefits"
        COLLABORATION[Enhanced Collaboration<br/>• Shared understanding<br/>• Common language<br/>• Early feedback<br/>• Reduced misunderstandings]
        
        DOCUMENTATION[Living Documentation<br/>• Always up-to-date<br/>• Executable specifications<br/>• Business-readable<br/>• Version controlled]
        
        QUALITY[Higher Quality<br/>• Focus on behavior<br/>• User-centric testing<br/>• Comprehensive coverage<br/>• Regression protection]
    end
    
    subgraph "BDD Best Practices"
        UBIQUITOUS[Use Ubiquitous Language<br/>• Domain terminology<br/>• Consistent vocabulary<br/>• Business-focused<br/>• Avoid technical jargon]
        
        DECLARATIVE[Declarative Scenarios<br/>• What, not how<br/>• Business outcomes<br/>• User perspective<br/>• Implementation independent]
        
        MAINTAINABLE[Maintainable Scenarios<br/>• DRY principle<br/>• Reusable steps<br/>• Clear structure<br/>• Regular refactoring]
    end
    
    %% BDD Tools and Integration
    subgraph "BDD Tools"
        CUCUMBER[Cucumber<br/>• Gherkin parser<br/>• Step definitions<br/>• Test execution<br/>• Reporting]
        
        JUNIT_CUCUMBER[JUnit + Cucumber<br/>• Test runner integration<br/>• Maven/Gradle support<br/>• IDE integration<br/>• CI/CD compatibility]
        
        ALLURE[Allure Reports<br/>• Rich test reports<br/>• Scenario visualization<br/>• Historical trends<br/>• Stakeholder friendly]
    end
    
    %% Common BDD Patterns
    subgraph "Common Patterns"
        BACKGROUND[Background<br/>Common preconditions<br/>for multiple scenarios]
        
        SCENARIO_OUTLINE[Scenario Outline<br/>Data-driven testing<br/>with examples table]
        
        TAGS[Tags<br/>Scenario categorization<br/>and selective execution]
        
        HOOKS[Hooks<br/>Setup and teardown<br/>for test scenarios]
    end
    
    %% BDD Anti-patterns
    subgraph "BDD Anti-patterns to Avoid"
        IMPERATIVE[Imperative Scenarios<br/>❌ Too much UI detail<br/>❌ Step-by-step instructions<br/>❌ Technical implementation]
        
        INCIDENTAL[Incidental Details<br/>❌ Irrelevant information<br/>❌ Over-specification<br/>❌ Brittle scenarios]
        
        CONJUNCTION[Conjunction Overuse<br/>❌ Too many And steps<br/>❌ Complex scenarios<br/>❌ Multiple behaviors]
    end
    
    %% BDD Workflow Integration
    subgraph "Integration with Development"
        SPRINT_PLANNING[Sprint Planning<br/>• Story analysis<br/>• Scenario writing<br/>• Acceptance criteria<br/>• Effort estimation]
        
        DAILY_STANDUP[Daily Standup<br/>• Scenario progress<br/>• Blockers discussion<br/>• Collaboration needs<br/>• Next steps]
        
        SPRINT_REVIEW[Sprint Review<br/>• Demo scenarios<br/>• Stakeholder feedback<br/>• Acceptance validation<br/>• Next iteration planning]
    end
    
    %% Continuous Integration
    subgraph "CI/CD Integration"
        AUTOMATED_TESTS[Automated BDD Tests<br/>• Pipeline integration<br/>• Regression testing<br/>• Quality gates<br/>• Deployment validation]
        
        REPORTING[Test Reporting<br/>• Scenario results<br/>• Coverage metrics<br/>• Trend analysis<br/>• Stakeholder dashboards]
    end
    
    %% Styling
    classDef startEnd fill:#e8f5e8,stroke:#1b5e20,stroke-width:3px
    classDef process fill:#e3f2fd,stroke:#0277bd,stroke-width:2px
    classDef decision fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef gherkin fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef implementation fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef benefit fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef tool fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef antipattern fill:#ffebee,stroke:#c62828,stroke-width:2px
    
    class START,COMPLETE startEnd
    class DISCOVERY,STAKEHOLDERS,EXAMPLES,RULES,STEP_DEFS,RUN_SCENARIOS,IMPLEMENT,GREEN_SCENARIOS,REFACTOR_CODE,REFACTOR_SCENARIOS,AUTOMATION process
    class REVIEW_SCENARIOS,MORE_SCENARIOS decision
    class GHERKIN,LIVING_DOC,FEATURE,SCENARIO,GIVEN,WHEN,THEN,EXAMPLE_FEATURE,EXAMPLE_SCENARIO gherkin
    class STEP_GIVEN,STEP_WHEN,STEP_THEN,BACKGROUND,SCENARIO_OUTLINE,TAGS,HOOKS implementation
    class COLLABORATION,DOCUMENTATION,QUALITY,UBIQUITOUS,DECLARATIVE,MAINTAINABLE benefit
    class CUCUMBER,JUNIT_CUCUMBER,ALLURE,SPRINT_PLANNING,DAILY_STANDUP,SPRINT_REVIEW,AUTOMATED_TESTS,REPORTING tool
    class IMPERATIVE,INCIDENTAL,CONJUNCTION antipattern