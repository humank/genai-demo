@startuml MSK Integration Architecture

title MSK Data Flow Tracking Architecture

package "EKS Cluster" {
    [GenAI Demo Application] as app
    [MSK Configuration] as msk_config
    [MSK Data Flow Service] as data_flow_service
    [MSK Error Handler] as error_handler
}

package "MSK Cluster" {
    [Business Event Topics] as business_topics
    [System Event Topics] as system_topics
    [Error Event Topics] as error_topics
}

package "AWS Services" {
    [Aurora PostgreSQL] as aurora
    [AWS X-Ray] as xray
    [CloudWatch] as cloudwatch
}

' Relationships
app --> msk_config : Uses
msk_config --> data_flow_service : Configures
data_flow_service --> business_topics : Publishes/Consumes
data_flow_service --> system_topics : Publishes/Consumes
error_handler --> error_topics : Handles

app --> aurora : Reads/Writes
data_flow_service --> xray : Traces
msk_config --> cloudwatch : Metrics

note right of msk_config
MSK Configuration Features:
- X-Ray tracing integration
- Performance optimization
- Reliability configuration
- Security (SASL/SCRAM, TLS)
- Error handling with DLQ
- Metrics integration
end note

note right of business_topics
Business Event Topics:
- order-events
- customer-events
- payment-events
- inventory-events
end note

note right of system_topics
System Event Topics:
- infrastructure-events
- deployment-events
- monitoring-events
end note

note right of error_topics
Error Event Topics:
- application-errors
- infrastructure-errors
- dead-letter-queue
end note

@enduml