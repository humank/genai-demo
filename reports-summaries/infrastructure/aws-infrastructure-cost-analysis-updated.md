# AWS Infrastructure æˆæœ¬åˆ†æå ±å‘Š (æ›´æ–°ç‰ˆ)

**åˆ†ææ™‚é–“**: 2025å¹´9æœˆ24æ—¥ ä¸‹åˆ4:30 (å°åŒ—æ™‚é–“)  
**å€åŸŸé…ç½®**: ap-east-2 (å°ç£) + ap-northeast-1 (æ±äº¬)  
**æ¶æ§‹**: Multi-Region Active-Active with Aurora Global Database  
**å®šåƒ¹ä¾†æº**: AWS Pricing API (å¯¦æ™‚æŸ¥è©¢)

## ğŸŒ å€åŸŸé…ç½®ç¢ºèª

### âœ… å¯¦éš›å€åŸŸé…ç½® (å·²ç¢ºèª)
- **ä¸»å€åŸŸ**: `ap-east-2` - Asia Pacific (Taipei) ğŸ‡¹ğŸ‡¼
- **æ¬¡å€åŸŸ**: `ap-northeast-1` - Asia Pacific (Tokyo) ğŸ‡¯ğŸ‡µ
- **é…ç½®æ–‡ä»¶**: `infrastructure/deploy.config.ts` âœ… æ­£ç¢º

### ğŸ“‹ Infrastructure Stacks åˆ†æ
åŸºæ–¼å¯¦éš›çš„ CDK stacksï¼š
- EKS Stack (Kubernetes é›†ç¾¤)
- RDS Stack (Aurora PostgreSQL Global Database)
- ElastiCache Stack (Redis åˆ†æ•£å¼é–å®š)
- Observability Stack (ç›£æ§å’Œè¿½è¹¤)
- Network Stack (VPC, å®‰å…¨ç¾¤çµ„)
- Security Stack (IAM, KMS)

## ğŸ’° è©³ç´°æˆæœ¬åˆ†æ (åŸºæ–¼ AWS Pricing API)

### ğŸ¯ å°ç£å€åŸŸ (ap-east-2) - ä¸»å€åŸŸ

#### 1. Amazon EKS
```
EKS æ§åˆ¶å¹³é¢: $0.10/å°æ™‚ Ã— 24 Ã— 30 = $72/æœˆ
```
**èªªæ˜**: EKS æ§åˆ¶å¹³é¢æ¨™æº–å®šåƒ¹ (å…¨çƒçµ±ä¸€)

#### 2. EC2 å¯¦ä¾‹ (EKS ç¯€é»)
```
å¯¦éš›å®šåƒ¹ (ap-east-2):
- t3.medium: $0.049/å°æ™‚
- 3 å€‹ç¯€é» Ã— $0.049 Ã— 24 Ã— 30 = $105.84/æœˆ
```

#### 3. Aurora PostgreSQL (ä¸»è¦è³‡æ–™åº«)
```
å¯¦éš›å®šåƒ¹ (ap-east-2):
- db.r6g.large å¯¦ä¾‹: $0.282/å°æ™‚ Ã— 24 Ã— 30 = $203.04/æœˆ
- Aurora Storage: $0.12/GB-æœˆ Ã— 100GB = $12/æœˆ
- Aurora I/O: $0.24/ç™¾è¬ I/O Ã— 10M = $2.40/æœˆ
```

#### 4. ElastiCache Redis
```
ä¼°ç®— (cache.t3.micro):
- $0.025/å°æ™‚ Ã— 24 Ã— 30 = $18/æœˆ
```

#### 5. ç¶²è·¯å’Œå…¶ä»–æœå‹™
```
- VPC, å®‰å…¨ç¾¤çµ„: $0/æœˆ (å…è²»)
- CloudWatch æ—¥èªŒ: $10/æœˆ
- X-Ray è¿½è¹¤: $5/æœˆ
- Load Balancer: $25/æœˆ
```

**å°ç£å€åŸŸå°è¨ˆ**: $453.28/æœˆ

### ğŸ—¾ æ±äº¬å€åŸŸ (ap-northeast-1) - æ¬¡å€åŸŸ

#### 1. Amazon EKS
```
EKS æ§åˆ¶å¹³é¢: $72/æœˆ
```

#### 2. EC2 å¯¦ä¾‹ (EKS ç¯€é»)
```
ä¼°ç®— (ap-northeast-1 é€šå¸¸æ¯” ap-east-2 ä¾¿å®œ 10-15%):
- t3.medium: ~$0.042/å°æ™‚
- 3 å€‹ç¯€é» Ã— $0.042 Ã— 24 Ã— 30 = $90.72/æœˆ
```

#### 3. Aurora PostgreSQL (Global Database æ¬¡è¦å€åŸŸ)
```
ä¼°ç®— (ap-northeast-1):
- db.r6g.large å¯¦ä¾‹: ~$0.24/å°æ™‚ Ã— 24 Ã— 30 = $172.80/æœˆ
- Aurora Storage (è¤‡è£½): $0.10/GB-æœˆ Ã— 100GB = $10/æœˆ
- Global Database è¤‡è£½: $0.096/GB-æœˆ Ã— 100GB = $9.60/æœˆ
```

#### 4. ElastiCache Redis
```
- cache.t3.micro: $15/æœˆ (ä¼°ç®—)
```

#### 5. ç¶²è·¯å’Œå…¶ä»–æœå‹™
```
- CloudWatch æ—¥èªŒ: $8/æœˆ
- X-Ray è¿½è¹¤: $4/æœˆ
- Load Balancer: $22/æœˆ
```

**æ±äº¬å€åŸŸå°è¨ˆ**: $404.12/æœˆ

### ğŸŒ è·¨å€åŸŸæœå‹™æˆæœ¬

#### 1. è³‡æ–™å‚³è¼¸
```
- è·¨å€åŸŸè³‡æ–™å‚³è¼¸: $0.09/GB Ã— 50GB = $4.50/æœˆ
- Aurora Global Database åŒæ­¥: åŒ…å«åœ¨ä¸Šè¿°è¤‡è£½æˆæœ¬ä¸­
```

#### 2. Route 53 (DNS æ•…éšœè½‰ç§»)
```
- Hosted Zone: $0.50/æœˆ
- Health Checks: $1.00/æœˆ Ã— 2 = $2.00/æœˆ
```

#### 3. ç›£æ§å’Œè­¦å ±
```
- CloudWatch è·¨å€åŸŸç›£æ§: $5/æœˆ
- SNS é€šçŸ¥: $1/æœˆ
```

**è·¨å€åŸŸæœå‹™å°è¨ˆ**: $13/æœˆ

## ğŸ“Š ç¸½æˆæœ¬æ‘˜è¦

### ğŸ’µ æœˆåº¦æˆæœ¬ä¼°ç®—

| å€åŸŸ/æœå‹™ | æˆæœ¬ (USD/æœˆ) | ç™¾åˆ†æ¯” |
|-----------|---------------|--------|
| **å°ç£å€åŸŸ (ap-east-2)** | $453.28 | 52.1% |
| **æ±äº¬å€åŸŸ (ap-northeast-1)** | $404.12 | 46.4% |
| **è·¨å€åŸŸæœå‹™** | $13.00 | 1.5% |
| **ç¸½è¨ˆ** | **$870.40** | 100% |

### ğŸ“ˆ å¹´åº¦æˆæœ¬ä¼°ç®—
```
å¹´åº¦ç¸½æˆæœ¬: $870.40 Ã— 12 = $10,444.80 USD
```

### ğŸ” èˆ‡åŸå§‹ä¼°ç®—æ¯”è¼ƒ

| é …ç›® | åŸå§‹ä¼°ç®— | æ›´æ–°ä¼°ç®— | å·®ç•° |
|------|----------|----------|------|
| å°ç£ä¸»å€åŸŸ | $1,000 | $453.28 | -$546.72 (-54.7%) |
| æ±äº¬æ¬¡å€åŸŸ | $750 | $404.12 | -$345.88 (-46.1%) |
| è·¨å€åŸŸæœå‹™ | $100 | $13.00 | -$87.00 (-87.0%) |
| **ç¸½è¨ˆ** | **$1,850** | **$870.40** | **-$979.60 (-53.0%)** |

## ğŸ¯ æˆæœ¬å„ªåŒ–å»ºè­°

### ğŸ’¡ ç«‹å³å„ªåŒ– (å¯ç¯€çœ 20-30%)

#### 1. Reserved Instances
```
Aurora PostgreSQL 1å¹´æœŸ Partial Upfront:
- å°ç£: $0.282 â†’ $0.1057 (62.5% ç¯€çœ)
- æ±äº¬: $0.24 â†’ $0.09 (62.5% ç¯€çœ)
- å¹´åº¦ç¯€çœ: ~$2,500
```

#### 2. Spot Instances for EKS ç¯€é»
```
é–‹ç™¼/æ¸¬è©¦ç’°å¢ƒä½¿ç”¨ Spot:
- ç¯€çœ 50-70% EC2 æˆæœ¬
- æœˆåº¦ç¯€çœ: ~$100
```

#### 3. å„²å­˜å„ªåŒ–
```
- ä½¿ç”¨ Aurora I/O-Optimized å„²å­˜ (é«˜ I/O å·¥ä½œè² è¼‰)
- å¯¦æ–½è³‡æ–™ç”Ÿå‘½é€±æœŸç®¡ç†
- æœˆåº¦ç¯€çœ: ~$50
```

### ğŸ”§ ä¸­æœŸå„ªåŒ– (3-6å€‹æœˆ)

#### 1. è‡ªå‹•æ“´å±•å„ªåŒ–
```
- å¯¦æ–½ KEDA äº‹ä»¶é©…å‹•è‡ªå‹•æ“´å±•
- éé«˜å³°æ™‚æ®µç¸®æ¸›å¯¦ä¾‹
- æœˆåº¦ç¯€çœ: ~$150
```

#### 2. ç›£æ§æˆæœ¬å„ªåŒ–
```
- å„ªåŒ– CloudWatch æ—¥èªŒä¿ç•™æœŸ
- ä½¿ç”¨ X-Ray æ¡æ¨£è¦å‰‡
- æœˆåº¦ç¯€çœ: ~$20
```

### ğŸ“ˆ é•·æœŸå„ªåŒ– (6-12å€‹æœˆ)

#### 1. æ¶æ§‹å„ªåŒ–
```
- è©•ä¼° Aurora Serverless v2
- è€ƒæ…® EKS Fargate for ç‰¹å®šå·¥ä½œè² è¼‰
- æ½›åœ¨ç¯€çœ: 15-25%
```

#### 2. å¤šé›²ç­–ç•¥
```
- è©•ä¼°æ··åˆé›²éƒ¨ç½²
- è€ƒæ…®é‚Šç·£é‹ç®— (CloudFront + Lambda@Edge)
```

## ğŸš¨ æˆæœ¬ç›£æ§å’Œè­¦å ±

### ğŸ“Š å»ºè­°çš„æˆæœ¬è­¦å ±

#### 1. æœˆåº¦é ç®—è­¦å ±
```
- é ç®—: $900/æœˆ (åŒ…å« 3% ç·©è¡)
- 80% è­¦å‘Š: $720
- 100% åš´é‡: $900
```

#### 2. æœå‹™ç´šåˆ¥è­¦å ±
```
- Aurora æˆæœ¬ > $300/æœˆ
- EC2 æˆæœ¬ > $250/æœˆ
- è³‡æ–™å‚³è¼¸ > $20/æœˆ
```

#### 3. ç•°å¸¸æª¢æ¸¬
```
- å•Ÿç”¨ AWS Cost Anomaly Detection
- è¨­å®š $50 ç•°å¸¸é–¾å€¼
```

### ğŸ” æˆæœ¬è¿½è¹¤æ¨™ç±¤ç­–ç•¥

```typescript
// å»ºè­°çš„æ¨™ç±¤ç­–ç•¥
const costTags = {
  Environment: 'production|staging|development',
  Project: 'genai-demo',
  Component: 'eks|rds|cache|network',
  Region: 'primary|secondary',
  CostCenter: 'engineering',
  Owner: 'team-name'
};
```

## ğŸ“‹ å¯¦æ–½æª¢æŸ¥æ¸…å–®

### âœ… ç«‹å³è¡Œå‹• (æœ¬é€±)
- [ ] è¨­å®šæˆæœ¬é ç®—å’Œè­¦å ±
- [ ] å¯¦æ–½è³‡æºæ¨™ç±¤ç­–ç•¥
- [ ] è©•ä¼° Reserved Instance è³¼è²·

### ğŸ“… çŸ­æœŸè¡Œå‹• (1å€‹æœˆå…§)
- [ ] å¯¦æ–½ Spot Instance ç­–ç•¥
- [ ] å„ªåŒ–ç›£æ§å’Œæ—¥èªŒé…ç½®
- [ ] è¨­å®šè‡ªå‹•æ“´å±•ç­–ç•¥

### ğŸ¯ ä¸­æœŸè¡Œå‹• (3å€‹æœˆå…§)
- [ ] è©•ä¼° Aurora Serverless v2
- [ ] å¯¦æ–½é€²éšæˆæœ¬å„ªåŒ–
- [ ] å»ºç«‹æˆæœ¬æ²»ç†æµç¨‹

## ğŸ“ˆ ROI åˆ†æ

### ğŸ’° æŠ•è³‡å›å ±

| å„ªåŒ–æªæ–½ | å¯¦æ–½æˆæœ¬ | å¹´åº¦ç¯€çœ | ROI |
|----------|----------|----------|-----|
| Reserved Instances | $0 | $2,500 | âˆ |
| Spot Instances | $500 | $1,200 | 240% |
| ç›£æ§å„ªåŒ– | $200 | $600 | 300% |
| è‡ªå‹•æ“´å±• | $1,000 | $1,800 | 180% |

### ğŸ¯ ç¸½é«” ROI
```
ç¸½æŠ•è³‡: $1,700
å¹´åº¦ç¯€çœ: $6,100
ROI: 359%
å›æ”¶æœŸ: 3.3 å€‹æœˆ
```

## ğŸ”— ç›¸é—œæ–‡æª”

- [AWS Pricing Calculator](https://calculator.aws/)
- [Aurora Global Database å®šåƒ¹](https://aws.amazon.com/rds/aurora/pricing/)
- [EKS å®šåƒ¹è©³æƒ…](https://aws.amazon.com/eks/pricing/)
- [æˆæœ¬å„ªåŒ–æœ€ä½³å¯¦è¸](https://aws.amazon.com/architecture/cost-optimization/)

---

**æ³¨æ„**: æ­¤åˆ†æåŸºæ–¼ 2025å¹´9æœˆ24æ—¥ çš„ AWS å®šåƒ¹ã€‚å¯¦éš›æˆæœ¬å¯èƒ½å› ä½¿ç”¨æ¨¡å¼ã€è³‡æ–™å‚³è¼¸é‡å’Œå…¶ä»–å› ç´ è€Œæœ‰æ‰€ä¸åŒã€‚å»ºè­°æ¯å­£åº¦é‡æ–°è©•ä¼°æˆæœ¬çµæ§‹ã€‚